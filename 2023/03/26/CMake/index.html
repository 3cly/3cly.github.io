



<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta name="google-site-verification" content="tcK6frO9MMMjv-s9v_SHFiAvsW8YHyINmZlIiYn3a4g" />


<link rel="alternate" type="application/rss+xml" title="skyの博客" href="https://3cly.github.io/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="skyの博客" href="https://3cly.github.io/atom.xml" />
<link rel="alternate" type="application/json" title="skyの博客" href="https://3cly.github.io/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  
  <meta name="keywords" content="笔记" />


<link rel="canonical" href="https://3cly.github.io/2023/03/26/CMake/">



  <title>
=CMake= - 学习 |
静かな港 = skyの博客 = 从来如此,便对么?</title>
<meta name="generator" content="Hexo 6.3.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">=CMake=
  </h1>
  
<div class="meta">
  <span class="item" title="创建时间：2023-03-26 14:38:21">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">发表于</span>
    <time itemprop="dateCreated datePublished" datetime="2023-03-26T14:38:21+08:00">2023-03-26</time>
  </span>
  <span class="item" title="本文字数">
    <span class="icon">
      <i class="ic i-pen"></i>
    </span>
    <span class="text">本文字数</span>
    <span>9.2k</span>
    <span class="text">字</span>
  </span>
  <span class="item" title="阅读时长">
    <span class="icon">
      <i class="ic i-clock"></i>
    </span>
    <span class="text">阅读时长</span>
    <span>8 分钟</span>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="切换导航栏">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">静かな港</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://pic.imgdb.cn/item/63fb02d0f144a01007de0e6e.jpg"></li>
          <li class="item" data-background-image="https://pic.imgdb.cn/item/640da85ef144a0100749f168.jpg"></li>
          <li class="item" data-background-image="https://pic.imgdb.cn/item/63ddebc54757feff33b67d1a.jpg"></li>
          <li class="item" data-background-image="https://pic.imgdb.cn/item/63ddec3f4757feff33b730c1.jpg"></li>
          <li class="item" data-background-image="https://pic.imgdb.cn/item/63bec082be43e0d30e4bcdb9.png"></li>
          <li class="item" data-background-image="https://pic.imgdb.cn/item/640da7eaf144a010074929bf.jpg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">首页</a></span><i class="ic i-angle-right"></i>
<span  class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="item" rel="index" title="分类于 学习"><span itemprop="name">学习</span></a>
<meta itemprop="position" content="1" /></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN">
  <link itemprop="mainEntityOfPage" href="https://3cly.github.io/2023/03/26/CMake/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.png">
    <meta itemprop="name" content="sky">
    <meta itemprop="description" content="从来如此,便对么?, 一只菜狗的博客">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="skyの博客">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <h1 id="cmake-01-basic"><a class="markdownIt-Anchor" href="#cmake-01-basic">#</a> cmake 01-basic</h1>
<h2 id="什么是cmake"><a class="markdownIt-Anchor" href="#什么是cmake">#</a> 什么是 cmake</h2>
<img data-src="\images\image-20230320003127778.png" alt="image-20230320003127778" style="zoom: 67%;">
<p>之前在 linux 虚拟机上安装各种工具或者编译文件时候常用到 cmake, 那么什么是 cmake 呢？</p>
<p>CMake 是一个跨平台的安装（编译）工具，可以用简单的语句来描述所有平台的安装 (编译过程)。他能够输出各种各样的 makefile 或者 project 文件，CMake 的组态档取名为 CMakeLists.txt。也就是在 CMakeLists.txt 这个文件中写 cmake 代码。接下来就系统的学习一下 cmake 的语法</p>
<h2 id="一hello-cmake"><a class="markdownIt-Anchor" href="#一hello-cmake">#</a> (一) hello-cmake</h2>
<h3 id="maincpp"><a class="markdownIt-Anchor" href="#maincpp">#</a> main.cpp</h3>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>   std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Hello CMake!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="cmakeliststxt"><a class="markdownIt-Anchor" href="#cmakeliststxt">#</a> CMakeLists.txt</h3>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.5</span><span class="token punctuation">)</span> <span class="token comment">#设置 CMake 最小版本</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">project</span> <span class="token punctuation">(</span>hello_cmake<span class="token punctuation">)</span> <span class="token comment">#设置工程名</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">add_executable</span><span class="token punctuation">(</span>hello_cmake main.cpp<span class="token punctuation">)</span> <span class="token comment">#生成可执行文件</span></pre></td></tr></table></figure><p><strong>生成与工程同名的二进制文件的办法</strong></p>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">2.6</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">project</span> <span class="token punctuation">(</span>hello_cmake<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">add_executable</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">&#125;</span> main.cpp<span class="token punctuation">)</span></pre></td></tr></table></figure><p>project (hello_cmake) 函数执行时会生成一个变量，是 PROJECT_NAME，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>P</mi><mi>R</mi><mi>O</mi><mi>J</mi><mi>E</mi><mi>C</mi><msub><mi>T</mi><mi>N</mi></msub><mi>A</mi><mi>M</mi><mi>E</mi></mrow><mtext>表示</mtext><mi>P</mi><mi>R</mi><mi>O</mi><mi>J</mi><mi>E</mi><mi>C</mi><msub><mi>T</mi><mi>N</mi></msub><mi>A</mi><mi>M</mi><mi>E</mi><mtext>变量的值为</mtext><mi>h</mi><mi>e</mi><mi>l</mi><mi>l</mi><msub><mi>o</mi><mi>c</mi></msub><mi>m</mi><mi>a</mi><mi>k</mi><mi>e</mi><mo separator="true">,</mo><mtext>所以把</mtext></mrow><annotation encoding="application/x-tex">{PROJECT_NAME}表示PROJECT_NAME变量的值为hello_cmake,所以把</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span><span class="mord cjk_fallback">表</span><span class="mord cjk_fallback">示</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord cjk_fallback">变</span><span class="mord cjk_fallback">量</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">值</span><span class="mord cjk_fallback">为</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord"><span class="mord mathnormal">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">m</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal">e</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">所</span><span class="mord cjk_fallback">以</span><span class="mord cjk_fallback">把</span></span></span></span> {PROJECT_NAME} 用在 add_executable () 里可以生成可执行文件名字叫 hello_cmake</p>
<h3 id="构建-编译和运行"><a class="markdownIt-Anchor" href="#构建-编译和运行">#</a> 构建、编译和运行</h3>
<p>构建有外部构建和内部构建两种，推荐使用外部构建，我们可以创建一个可以位于文件系统上任何位置的构建文件夹。 所有临时构建和目标文件都位于此目录中，以保持源代码树的整洁。</p>
<p>拿本例子来说：</p>
<p>运行下述代码，新建 build 构建文件夹，并运行 cmake 命令</p>
<figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">mkdir</span> build  新建build构建文件夹</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token builtin class-name">cd</span> build/</pre></td></tr><tr><td data-num="3"></td><td><pre>cmake <span class="token punctuation">..</span></pre></td></tr><tr><td data-num="4"></td><td><pre>这时其实可以直接make</pre></td></tr></table></figure><p>构建系统是需要指定 CMakeLists.txt 所在路径，此时在 build 目录下，所以用  <code>..</code>  表示 CMakeLists.txt 在上一级目录。</p>
<p>此时在 build 目录下会生成 Makefile 文件，然后调用编译器来实际编译和链接项目：</p>
<figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>cmake --build .</pre></td></tr></table></figure><p><code>--build</code>  指定编译生成的文件存放目录，其中就包括可执行文件， <code>.</code>  表示存放到当前目录</p>
<p><img data-src="P:%5CHexo-Blog%5Csource%5Cimages%5Cimage-20230320210319645.png" alt="image-20230320210319645"></p>
<p>同时如果点开 build 文件夹就可以看到，build 文件夹下生成了许多二进制文件，如果要从头开始重新创建 cmake 环境，只需删除构建目录 build，然后重新运行 cmake。 所以外部构建非常方便</p>
<h2 id="二hello-headers"><a class="markdownIt-Anchor" href="#二hello-headers">#</a> (二) hello-headers</h2>
<h3 id="文件树"><a class="markdownIt-Anchor" href="#文件树">#</a> 文件树</h3>
<pre><code class="language-tree">├── CMakeLists.txt
├── include
│   └── Hello.h
└── src
    ├── Hello.cpp
    └── main.cpp
</code></pre>
<h3 id="cmakeliststxt-2"><a class="markdownIt-Anchor" href="#cmakeliststxt-2">#</a> CMakeLists.txt</h3>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.5</span><span class="token punctuation">)</span><span class="token comment">#最低 CMake 版本</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">project</span> <span class="token punctuation">(</span>hello_headers<span class="token punctuation">)</span><span class="token comment"># 工程名</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token property">SOURCES</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    src/Hello.cpp</pre></td></tr><tr><td data-num="7"></td><td><pre>    src/main.cpp</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">)</span><span class="token comment">#创建一个变量，名字叫 SOURCE。它包含了所有的 cpp 文件。</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">add_executable</span><span class="token punctuation">(</span>hello_headers <span class="token punctuation">$&#123;</span><span class="token property">SOURCES</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment">#用所有的源文件生成一个可执行文件，因为这里定义了 SOURCE 变量，所以就不需要罗列 cpp 文件了</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">#等价于命令：     add_executable (hello_headers src/Hello.cpp src/main.cpp)</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">target_include_directories</span><span class="token punctuation">(</span>hello_headers</pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token namespace">PRIVATE</span> </pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token punctuation">$&#123;</span><span class="token variable">PROJECT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/include</pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">)</span><span class="token comment">#设置这个可执行文件 hello_headers 需要包含的库的路径</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">#PROJECT_SOURCE_DIR 指工程顶层目录</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment">#PROJECT_Binary_DIR 指编译目录</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token comment">#PRIVATE 指定了库的范围</span></pre></td></tr></table></figure><blockquote>
<ul>
<li>PRIVATE - 目录被添加到目标（库）的包含路径中。</li>
<li>INTERFACE - 目录没有被添加到目标（库）的包含路径中，而是链接了这个库的其他目标（库或者可执行程序）包含路径中</li>
<li>PUBLIC - 目录既被添加到目标（库）的包含路径中，同时添加到了链接了这个库的其他目标（库或者可执行程序）的包含路径中</li>
</ul>
<p>也就是说，根据库是否包含这个路径，以及调用了这个库的其他目标是否包含这个路径，可以分为三种 scope。</p>
</blockquote>
<h3 id="cmake中的常用的变量一些目录"><a class="markdownIt-Anchor" href="#cmake中的常用的变量一些目录">#</a> CMake 中的常用的变量 (一些目录)</h3>
<p>CMake 语法指定了许多变量，可用于在项目或源代码树中找到有用的目录。 其中一些包括：</p>
<table>
<thead>
<tr>
<th style="text-align:left">Variable</th>
<th style="text-align:left">Info</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">CMAKE_SOURCE_DIR</td>
<td style="text-align:left">根源代码目录，工程顶层目录。暂认为就是 PROJECT_SOURCE_DIR</td>
</tr>
<tr>
<td style="text-align:left">CMAKE_CURRENT_SOURCE_DIR</td>
<td style="text-align:left">当前处理的 CMakeLists.txt 所在的路径</td>
</tr>
<tr>
<td style="text-align:left">PROJECT_SOURCE_DIR</td>
<td style="text-align:left">工程顶层目录</td>
</tr>
<tr>
<td style="text-align:left">CMAKE_BINARY_DIR</td>
<td style="text-align:left">运行 cmake 的目录。外部构建时就是 build 目录</td>
</tr>
<tr>
<td style="text-align:left">CMAKE_CURRENT_BINARY_DIR</td>
<td style="text-align:left">The build directory you are currently in. 当前所在 build 目录</td>
</tr>
<tr>
<td style="text-align:left">PROJECT_BINARY_DIR</td>
<td style="text-align:left">暂认为就是 CMAKE_BINARY_DIR</td>
</tr>
</tbody>
</table>
<p>想体会一下，可以在 CMakeLists 中，利用 message（）命令输出一下这些变量。</p>
<p>另外，这些变量不仅可以在 CMakeLists 中使用，同样可以在源代码.cpp 中使用。</p>
<h3 id="源文件变量不建议这样做"><a class="markdownIt-Anchor" href="#源文件变量不建议这样做">#</a> 源文件变量 (不建议这样做)</h3>
<p>回到代码的部分，这里创建了一个包含多个源文件的变量 SOURCES (不建议这样做，可能会导致 glob 命令在添加新的源文件后不会显示正确的结果)</p>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token property">SOURCES</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    src/Hello.cpp</pre></td></tr><tr><td data-num="3"></td><td><pre>    src/main.cpp</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">add_executable</span><span class="token punctuation">(</span><span class="token punctuation">$&#123;</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">&#125;</span> <span class="token punctuation">$&#123;</span><span class="token property">SOURCES</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="包含头文件"><a class="markdownIt-Anchor" href="#包含头文件">#</a> 包含头文件</h3>
<p>当您有其他需要包含的文件夹（文件夹里有头文件）时，可以使用以下命令使编译器知道它们： target_include_directories（）。 编译此目标时，这将使用 - I 标志将这些目录添加到编译器中，例如 -I / 目录 / 路径</p>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">target_include_directories</span><span class="token punctuation">(</span>target</pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token namespace">PRIVATE</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token punctuation">$&#123;</span><span class="token variable">PROJECT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/include</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure><blockquote>
<p>PRIVATE  标识符指定包含的范围。 这对库很重要。</p>
</blockquote>
<p><strong>对于公共的头文件，最好在 include 文件夹下建立子目录。</strong></p>
<p><strong>传递给函数 target_include_directories () 的目录，应该是所有包含目录的根目录，然后在这个根目录下建立不同的文件夹，分别写头文件。</strong></p>
<p><strong>这样使用的时候，不需要写 ${PROJECT_SOURCE_DIR}/include，而是直接选择对应的文件夹里对应头文件。下面是例子： <code>#include &quot;static/Hello.h&quot;</code>  而不是 <code>#include &quot;Hello.h&quot;</code>  使用此方法意味着在项目中使用多个库时，头文件名冲突的可能性较小。</strong></p>
<h2 id="三static-library"><a class="markdownIt-Anchor" href="#三static-library">#</a> （三）Static Library</h2>
<h3 id="cmakeliststxt-3"><a class="markdownIt-Anchor" href="#cmakeliststxt-3">#</a> CMakeLists.txt</h3>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.5</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">project</span><span class="token punctuation">(</span>hello_library<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">############################################################</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># Create a library</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">############################################################</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#库的源文件 Hello.cpp 生成静态库 hello_library</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">add_library</span><span class="token punctuation">(</span>hello_library <span class="token namespace">STATIC</span> </pre></td></tr><tr><td data-num="8"></td><td><pre>    src/Hello.cpp</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">target_include_directories</span><span class="token punctuation">(</span>hello_library</pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token namespace">PUBLIC</span> </pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token punctuation">$&#123;</span><span class="token variable">PROJECT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/include</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment"># target_include_directories 为一个目标（可能是一个库 library 也可能是可执行文件）添加头文件路径。</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">############################################################</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment"># Create an executable</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">############################################################</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment"># Add an executable with the above sources</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">#指定用哪个源文件生成可执行文件</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">add_executable</span><span class="token punctuation">(</span>hello_binary </pre></td></tr><tr><td data-num="21"></td><td><pre>    src/main.cpp</pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token comment">#链接可执行文件和静态库</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span> hello_binary</pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token namespace">PRIVATE</span> </pre></td></tr><tr><td data-num="26"></td><td><pre>        hello_library</pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token comment">#链接库和包含头文件都有关于 scope 这三个关键字的用法。</span></pre></td></tr></table></figure><h4 id="创建静态库"><a class="markdownIt-Anchor" href="#创建静态库">#</a> 创建静态库</h4>
<p>add_library（）函数用于从某些源文件创建一个库，默认生成在构建文件夹。 写法如下：</p>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">add_library</span><span class="token punctuation">(</span>hello_library <span class="token namespace">STATIC</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    src/Hello.cpp</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure><p>在 add_library 调用中包含了源文件，用于创建名称为 libhello_library.a 的静态库。</p>
<h3 id="链接库"><a class="markdownIt-Anchor" href="#链接库">#</a> 链接库</h3>
<p>创建将使用这个库的可执行文件时，必须告知编译器需要用到这个库。 可以使用 target_link_library（）函数完成此操作。add_executable () 连接源文件，target_link_libraries () 连接库文件。</p>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">add_executable</span><span class="token punctuation">(</span>hello_binary</pre></td></tr><tr><td data-num="2"></td><td><pre>    src/main.cpp</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span> hello_binary</pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token namespace">PRIVATE</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        hello_library</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure><p>这告诉 CMake 在链接期间将 hello_library 链接到 hello_binary 可执行文件。 同时，这个被链接的库如果有 INTERFACE 或者 PUBLIC 属性的包含目录，那么，这个包含目录也会被传递（ propagate ）给这个可执行文件。</p>
<h2 id="四shared-library"><a class="markdownIt-Anchor" href="#四shared-library">#</a> （四）Shared Library</h2>
<h3 id="cmakeliststxt-4"><a class="markdownIt-Anchor" href="#cmakeliststxt-4">#</a> CMakeLists.txt</h3>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.5</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">project</span><span class="token punctuation">(</span>hello_library<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">############################################################</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># Create a library</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">############################################################</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#根据 Hello.cpp 生成动态库</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">add_library</span><span class="token punctuation">(</span>hello_library <span class="token namespace">SHARED</span> </pre></td></tr><tr><td data-num="8"></td><td><pre>    src/Hello.cpp</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">#给动态库 hello_library 起一个别的名字 hello::library</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">add_library</span><span class="token punctuation">(</span><span class="token inserted class-name">hello::library</span> ALIAS hello_library<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">#为这个库目标，添加头文件路径，PUBLIC 表示包含了这个库的目标也会包含这个路径</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">target_include_directories</span><span class="token punctuation">(</span>hello_library</pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token namespace">PUBLIC</span> </pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token punctuation">$&#123;</span><span class="token variable">PROJECT_SOURCE_DIR</span><span class="token punctuation">&#125;</span>/include</pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">############################################################</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment"># Create an executable</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">############################################################</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment">#根据 main.cpp 生成可执行文件</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">add_executable</span><span class="token punctuation">(</span>hello_binary</pre></td></tr><tr><td data-num="22"></td><td><pre>    src/main.cpp</pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token comment">#链接库和可执行文件，使用的是这个库的别名。PRIVATE 表示</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span> hello_binary</pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token namespace">PRIVATE</span> </pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token inserted class-name">hello::library</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="创建动态库"><a class="markdownIt-Anchor" href="#创建动态库">#</a> 创建动态库</h3>
<p>add_library（）函数用于从某些源文件创建一个动态库，默认生成在构建文件夹。 写法如下：</p>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">add_library</span><span class="token punctuation">(</span>hello_library <span class="token namespace">SHARED</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    src/Hello.cpp</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure><p>在 add_library 调用中包含了源文件，用于创建名称为 libhello_library.so 的动态库。</p>
<h2 id="五build-type"><a class="markdownIt-Anchor" href="#五build-type">#</a> （五）build-type</h2>
<h3 id="cmakeliststxt-5"><a class="markdownIt-Anchor" href="#cmakeliststxt-5">#</a> CMakeLists.txt</h3>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.5</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#如果没有指定则设置默认编译方式</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">NOT</span> <span class="token variable">CMAKE_BUILD_TYPE</span> <span class="token operator">AND</span> <span class="token operator">NOT</span> <span class="token variable">CMAKE_CONFIGURATION_TYPES</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token comment">#在命令行中输出 message 里的信息</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token keyword">message</span><span class="token punctuation">(</span><span class="token string">"Setting build type to 'RelWithDebInfo' as none was specified."</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token comment">#不管 CACHE 里有没有设置过 CMAKE_BUILD_TYPE 这个变量，都强制赋值这个值为 RelWithDebInfo</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_BUILD_TYPE</span> RelWithDebInfo <span class="token variable">CACHE</span> STRING <span class="token string">"Choose the type of build."</span> FORCE<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token comment"># 当使用 cmake-gui 的时候，设置构建级别的四个可选项</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  <span class="token keyword">set_property</span><span class="token punctuation">(</span><span class="token variable">CACHE</span> <span class="token variable">CMAKE_BUILD_TYPE</span> PROPERTY <span class="token property">STRINGS</span> <span class="token string">"Debug"</span> <span class="token string">"Release"</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token string">"MinSizeRel"</span> <span class="token string">"RelWithDebInfo"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">project</span> <span class="token punctuation">(</span>build_type<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">add_executable</span><span class="token punctuation">(</span>cmake_examples_build_type main.cpp<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment">#这里的注释只说明注释后每一句的作用</span></pre></td></tr></table></figure><h3 id="构建级别"><a class="markdownIt-Anchor" href="#构建级别">#</a> 构建级别</h3>
<p>CMake 具有许多内置的构建配置，可用于编译工程。 这些配置指定了代码优化的级别，以及调试信息是否包含在二进制文件中。</p>
<p>这些优化级别，主要有：</p>
<ul>
<li>
<p>Release —— 不可以打断点调试，程序开发完成后发行使用的版本，占的体积小。 它对代码做了优化，因此速度会非常快，</p>
<p>在编译器中使用命令：  <code>-O3 -DNDEBUG</code>  可选择此版本。</p>
</li>
<li>
<p>Debug —— 调试的版本，体积大。</p>
<p>在编译器中使用命令：  <code>-g</code>  可选择此版本。</p>
</li>
<li>
<p>MinSizeRel—— 最小体积版本</p>
<p>在编译器中使用命令： <code>-Os -DNDEBUG</code>  可选择此版本。</p>
</li>
<li>
<p>RelWithDebInfo—— 既优化又能调试。</p>
<p>在编译器中使用命令： <code>-O2 -g -DNDEBUG</code>  可选择此版本。</p>
</li>
</ul>
<h3 id="设置级别的方式"><a class="markdownIt-Anchor" href="#设置级别的方式">#</a> 设置级别的方式</h3>
<h4 id="cmake图形界面"><a class="markdownIt-Anchor" href="#cmake图形界面">#</a> CMake 图形界面</h4>
<p>cmake-gui</p>
<h4 id="cmake命令行中"><a class="markdownIt-Anchor" href="#cmake命令行中">#</a> CMake 命令行中</h4>
<p>在命令行运行 CMake 的时候， 使用 cmake 命令行的 - D 选项配置编译类型</p>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre>cmake .. -DCMAKE_BUILD_TYPE=Release</pre></td></tr></table></figure><h2 id="六-compile-flags"><a class="markdownIt-Anchor" href="#六-compile-flags">#</a> （六） Compile Flags</h2>
<h3 id="cmakeliststxt-6"><a class="markdownIt-Anchor" href="#cmakeliststxt-6">#</a> CMakeLists.txt</h3>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.5</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#强制设置默认 C++ 编译标志变量为缓存变量，如 CMake（五） build type 所说，该缓存变量被定义在文件中，相当于全局变量，源文件中也可以使用这个变量</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_FLAGS</span> <span class="token string">"<span class="token interpolation"><span class="token punctuation">$&#123;</span><span class="token variable">CMAKE_CXX_FLAGS</span><span class="token punctuation">&#125;</span></span> -DEX2"</span> <span class="token variable">CACHE</span> STRING <span class="token string">"Set C++ Compiler Flags"</span> FORCE<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">project</span> <span class="token punctuation">(</span>compile_flags<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">add_executable</span><span class="token punctuation">(</span>cmake_examples_compile_flags main.cpp<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#为可执行文件添加私有编译定义</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">target_compile_definitions</span><span class="token punctuation">(</span>cmake_examples_compile_flags </pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token namespace">PRIVATE</span> EX3</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="编译标志"><a class="markdownIt-Anchor" href="#编译标志">#</a> 编译标志</h3>
<p>编译标志是编译器在编译过程中使用的一些参数，用于指定编译器的行为。不同的编译标志会影响编译器的行为，从而影响生成的可执行文件的行为。例如，使用不同的编译标志可以控制编译器的优化级别、警告级别、调试信息等。<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODI1NDUxL2FydGljbGUvZGV0YWlscy8xMDMzOTI3MTk=">1</span></p>
<p>在 CMake 中，可以使用以下方法设置编译标志：</p>
<ul>
<li>通过 target_compile_definitions () 函数设置某个目标的编译标志，这是现代 CMake 中设置 C++ 标志的推荐方法。</li>
<li>设置默认编译标志，可以使用以下方法：</li>
</ul>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_FLAGS</span> <span class="token string">"<span class="token interpolation"><span class="token punctuation">$&#123;</span><span class="token variable">CMAKE_CXX_FLAGS</span><span class="token punctuation">&#125;</span></span> -DEX2"</span> <span class="token variable">CACHE</span> STRING <span class="token string">"set c++ compiler flags"</span> FORCE<span class="token punctuation">)</span></pre></td></tr></table></figure><ul>
<li>设置全局 C 编译器标志，可以使用以下方法：<span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8xNDkyMTI2NTA=">参考</span></li>
</ul>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_C_FLAGS</span> <span class="token string">"<span class="token interpolation"><span class="token punctuation">$&#123;</span><span class="token variable">CMAKE_C_FLAGS</span><span class="token punctuation">&#125;</span></span> -DEX2"</span> <span class="token variable">CACHE</span> STRING <span class="token string">"set c compiler flags"</span> FORCE<span class="token punctuation">)</span></pre></td></tr></table></figure><p>不同的编译标志会影响编译器的行为，从而影响生成的可执行文件的行为。例如，使用不同的编译标志可以控制编译器的优化级别、警告级别、调试信息等。</p>
<h2 id="七-including-third-party"><a class="markdownIt-Anchor" href="#七-including-third-party">#</a> （七） Including Third Party</h2>
<h3 id="cmakeliststxt-7"><a class="markdownIt-Anchor" href="#cmakeliststxt-7">#</a> CMakeLists.txt</h3>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.5</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># Set the project name</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">project</span> <span class="token punctuation">(</span>third_party_include<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># find a boost install with the libraries filesystem and system</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#使用库文件系统和系统查找 boost install</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">find_package</span><span class="token punctuation">(</span>Boost <span class="token number">1.46.1</span> REQUIRED COMPONENTS filesystem system<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#这是第三方库，而不是自己生成的静态动态库</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment"># check if boost was found</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>Boost_FOUND<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">message</span> <span class="token punctuation">(</span><span class="token string">"boost found"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">else</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">message</span> <span class="token punctuation">(</span>FATAL_ERROR <span class="token string">"Cannot find Boost"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment"># Add an executable</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">add_executable</span><span class="token punctuation">(</span>third_party_include main.cpp<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment"># link against the boost libraries</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span> third_party_include</pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token namespace">PRIVATE</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token inserted class-name">Boost::filesystem</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">)</span></pre></td></tr></table></figure><h3 id="cmake解析"><a class="markdownIt-Anchor" href="#cmake解析">#</a> CMake 解析</h3>
<p>几乎所有不平凡的项目都将要求包含第三方库，头文件或程序。 CMake 支持使用 find_package（）函数查找这些工具的路径。  这将从 CMAKE_MODULE_PATH 中的文件夹列表中搜索格式为 “FindXXX.cmake” 的 CMake 模块。  在 linux 上，默认搜索路径将是 /usr/share /cmake/ Modules。  在我的系统上，这包括对大约 142 个通用第三方库的支持。</p>
<p>此示例要求将 Boost 库安装在默认系统位置。</p>
<h3 id="finding-a-package"><a class="markdownIt-Anchor" href="#finding-a-package">#</a> Finding a Package</h3>
<p>如上所述，find_package（）函数将从 CMAKE_MODULE_PATH 中的文件夹列表中搜索 “FindXXX.cmake” 中的 CMake 模块。 find_package 参数的确切格式取决于要查找的模块。  这通常记录在 FindXXX.cmake 文件的顶部。</p>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">find_package</span><span class="token punctuation">(</span>Boost <span class="token number">1.46.1</span> REQUIRED COMPONENTS filesystem system<span class="token punctuation">)</span></pre></td></tr></table></figure><p>参数：</p>
<p>Boost - 库名称。 这是用于查找模块文件 FindBoost.cmake 的一部分</p>
<p>1.46.1 - 需要的 boost 库最低版本</p>
<p>REQUIRED - 告诉模块这是必需的，如果找不到会报错</p>
<p>COMPONENTS - 要查找的库列表。从后面的参数代表的库里找 boost</p>
<p>可以使用更多参数，也可以使用其他变量。 在后面的示例中提供了更复杂的设置。</p>
<h2 id="18-用clang编译工程我略了"><a class="markdownIt-Anchor" href="#18-用clang编译工程我略了">#</a> 1.8 用 clang 编译工程 (我略了)</h2>
<p>使用 CMake 进行构建时，可以设置 C 和 C ++ 编译器。 此示例与<span class="exturl" data-url="aHR0cHM6Ly9zZnVtZWNqZi5naXRodWIuaW8vY21ha2UtZXhhbXBsZXMtQ2hpbmVzZS9BLWhlbGxvLWNtYWtl"> hello-cmake</span> 示例相同，不同之处在于它显示了将编译器从默认的 gcc 更改为<span class="exturl" data-url="aHR0cDovL2NsYW5nLmxsdm0ub3JnLw=="> clang</span> 的最基本方法。</p>
<h2 id="19-用ninja构建工程略啦"><a class="markdownIt-Anchor" href="#19-用ninja构建工程略啦">#</a> 1.9 用 ninja 构建工程 (略啦)</h2>
<p>CMake 是一个元构建系统，可用于为许多其他构建工具创建构建文件。 这个例子展示了如何让 CMake 使用 ninja 构建工具。</p>
<h2 id="110-导入第三方库到目标"><a class="markdownIt-Anchor" href="#110-导入第三方库到目标">#</a> 1.10 导入第三方库到目标</h2>
<h3 id="导入目标"><a class="markdownIt-Anchor" href="#导入目标">#</a> 导入目标</h3>
<p>Imported targets 是 FindXXX 模块导出的只读目标。</p>
<p>在 CMake 命令中包含 boost 这个库：</p>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span> imported_targets</pre></td></tr><tr><td data-num="2"></td><td><pre>      <span class="token namespace">PRIVATE</span></pre></td></tr><tr><td data-num="3"></td><td><pre>          <span class="token inserted class-name">Boost::filesystem</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">)</span></pre></td></tr></table></figure><ul>
<li>
<p>作用是自动链接 Boost</p>
<p>filesystem 和 Boost :: system 库，同时还包括 Boost 头文件目录。</p>
</li>
</ul>
<h2 id="111-设置c-标准"><a class="markdownIt-Anchor" href="#111-设置c-标准">#</a> 1.11 设置 C++ 标准</h2>
<p>CMake 支持传递一个变量给函数 CMAKE_CXX_COMPILER_FLAG 来编译程序。 然后将结果存储在您传递的变量中。</p>
<p>For example:</p>
<figure class="highlight cmake"><figcaption data-lang="CMake"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">include</span><span class="token punctuation">(</span>CheckCXXCompilerFlag<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">CHECK_CXX_COMPILER_FLAG</span><span class="token punctuation">(</span><span class="token string">"-std=c++11"</span> COMPILER_SUPPORTS_CXX11<span class="token punctuation">)</span></pre></td></tr></table></figure><h2 id="21子项目"><a class="markdownIt-Anchor" href="#21子项目">#</a> 2.1 子项目</h2>
<p>本示例说明如何包含子项目。 顶级 CMakeLists.txt 调用子目录中的 CMakeLists.txt 来创建以下内容：</p>
<ul>
<li>sublibrary1 - 一个静态库</li>
<li>sublibrary2 - 只有头文件的库</li>
<li>subbinary - 一个可执行文件</li>
</ul>
<p>文件树如下:</p>
<pre><code>$ tree
.
├── CMakeLists.txt
├── subbinary
│   ├── CMakeLists.txt
│   └── main.cpp
├── sublibrary1
│   ├── CMakeLists.txt
│   ├── include
│   │   └── sublib1
│   │       └── sublib1.h
│   └── src
│       └── sublib1.cpp
└── sublibrary2
    ├── CMakeLists.txt
    └── include
        └── sublib2
            └── sublib2.h
</code></pre>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
      <div class="tags">
          <a href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag"><i class="ic i-tag"></i> 笔记</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">更新于</span>
    <time title="修改时间：2023-03-26 14:45:05" itemprop="dateModified" datetime="2023-03-26T14:45:05+08:00">2023-03-26</time>
  </span>
  <span id="2023/03/26/CMake/" class="item leancloud_visitors" data-flag-title="=CMake=" title="阅读次数">
      <span class="icon">
        <i class="ic i-eye"></i>
      </span>
      <span class="text">阅读次数</span>
      <span class="leancloud-visitors-count"></span>
      <span class="text">次</span>
  </span>
</div>

      

<div id="copyright">
<ul>
  <li class="author">
    <strong>本文作者： </strong>sky <i class="ic i-at"><em>@</em></i>skyの博客
  </li>
  <li class="link">
    <strong>本文链接：</strong>
    <a href="https://3cly.github.io/2023/03/26/CMake/" title="&#x3D;CMake&#x3D;">https://3cly.github.io/2023/03/26/CMake/</a>
  </li>
  <li class="license">
    <strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2023/03/19/JAVA%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;pic.imgdb.cn&#x2F;item&#x2F;640da838f144a0100749b193.jpg" title="JAVA学习">
  <span class="type">上一篇</span>
  <span class="category"><i class="ic i-flag"></i> 学习</span>
  <h3>JAVA学习</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2023/04/02/%E5%87%A0%E9%81%93RE%E9%A2%98/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;pic.imgdb.cn&#x2F;item&#x2F;63ddec3f4757feff33b730c1.jpg" title="几道RE题">
  <span class="type">下一篇</span>
  <span class="category"><i class="ic i-flag"></i> 学习</span>
  <h3>几道RE题</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="文章目录">
          <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#cmake-01-basic"><span class="toc-number">1.</span> <span class="toc-text"> cmake 01-basic</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFcmake"><span class="toc-number">1.1.</span> <span class="toc-text"> 什么是 cmake</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80hello-cmake"><span class="toc-number">1.2.</span> <span class="toc-text"> (一) hello-cmake</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#maincpp"><span class="toc-number">1.2.1.</span> <span class="toc-text"> main.cpp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cmakeliststxt"><span class="toc-number">1.2.2.</span> <span class="toc-text"> CMakeLists.txt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA-%E7%BC%96%E8%AF%91%E5%92%8C%E8%BF%90%E8%A1%8C"><span class="toc-number">1.2.3.</span> <span class="toc-text"> 构建、编译和运行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8Chello-headers"><span class="toc-number">1.3.</span> <span class="toc-text"> (二) hello-headers</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%A0%91"><span class="toc-number">1.3.1.</span> <span class="toc-text"> 文件树</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cmakeliststxt-2"><span class="toc-number">1.3.2.</span> <span class="toc-text"> CMakeLists.txt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cmake%E4%B8%AD%E7%9A%84%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8F%98%E9%87%8F%E4%B8%80%E4%BA%9B%E7%9B%AE%E5%BD%95"><span class="toc-number">1.3.3.</span> <span class="toc-text"> CMake 中的常用的变量 (一些目录)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BA%90%E6%96%87%E4%BB%B6%E5%8F%98%E9%87%8F%E4%B8%8D%E5%BB%BA%E8%AE%AE%E8%BF%99%E6%A0%B7%E5%81%9A"><span class="toc-number">1.3.4.</span> <span class="toc-text"> 源文件变量 (不建议这样做)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%85%E5%90%AB%E5%A4%B4%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.5.</span> <span class="toc-text"> 包含头文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89static-library"><span class="toc-number">1.4.</span> <span class="toc-text"> （三）Static Library</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cmakeliststxt-3"><span class="toc-number">1.4.1.</span> <span class="toc-text"> CMakeLists.txt</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%9D%99%E6%80%81%E5%BA%93"><span class="toc-number">1.4.1.1.</span> <span class="toc-text"> 创建静态库</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%BE%E6%8E%A5%E5%BA%93"><span class="toc-number">1.4.2.</span> <span class="toc-text"> 链接库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9Bshared-library"><span class="toc-number">1.5.</span> <span class="toc-text"> （四）Shared Library</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cmakeliststxt-4"><span class="toc-number">1.5.1.</span> <span class="toc-text"> CMakeLists.txt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%8A%A8%E6%80%81%E5%BA%93"><span class="toc-number">1.5.2.</span> <span class="toc-text"> 创建动态库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94build-type"><span class="toc-number">1.6.</span> <span class="toc-text"> （五）build-type</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cmakeliststxt-5"><span class="toc-number">1.6.1.</span> <span class="toc-text"> CMakeLists.txt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E7%BA%A7%E5%88%AB"><span class="toc-number">1.6.2.</span> <span class="toc-text"> 构建级别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E7%BA%A7%E5%88%AB%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">1.6.3.</span> <span class="toc-text"> 设置级别的方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#cmake%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2"><span class="toc-number">1.6.3.1.</span> <span class="toc-text"> CMake 图形界面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cmake%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%AD"><span class="toc-number">1.6.3.2.</span> <span class="toc-text"> CMake 命令行中</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD-compile-flags"><span class="toc-number">1.7.</span> <span class="toc-text"> （六） Compile Flags</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cmakeliststxt-6"><span class="toc-number">1.7.1.</span> <span class="toc-text"> CMakeLists.txt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E6%A0%87%E5%BF%97"><span class="toc-number">1.7.2.</span> <span class="toc-text"> 编译标志</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83-including-third-party"><span class="toc-number">1.8.</span> <span class="toc-text"> （七） Including Third Party</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cmakeliststxt-7"><span class="toc-number">1.8.1.</span> <span class="toc-text"> CMakeLists.txt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cmake%E8%A7%A3%E6%9E%90"><span class="toc-number">1.8.2.</span> <span class="toc-text"> CMake 解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#finding-a-package"><span class="toc-number">1.8.3.</span> <span class="toc-text"> Finding a Package</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-%E7%94%A8clang%E7%BC%96%E8%AF%91%E5%B7%A5%E7%A8%8B%E6%88%91%E7%95%A5%E4%BA%86"><span class="toc-number">1.9.</span> <span class="toc-text"> 1.8 用 clang 编译工程 (我略了)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-%E7%94%A8ninja%E6%9E%84%E5%BB%BA%E5%B7%A5%E7%A8%8B%E7%95%A5%E5%95%A6"><span class="toc-number">1.10.</span> <span class="toc-text"> 1.9 用 ninja 构建工程 (略啦)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#110-%E5%AF%BC%E5%85%A5%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E5%88%B0%E7%9B%AE%E6%A0%87"><span class="toc-number">1.11.</span> <span class="toc-text"> 1.10 导入第三方库到目标</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E7%9B%AE%E6%A0%87"><span class="toc-number">1.11.1.</span> <span class="toc-text"> 导入目标</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#111-%E8%AE%BE%E7%BD%AEc-%E6%A0%87%E5%87%86"><span class="toc-number">1.12.</span> <span class="toc-text"> 1.11 设置 C++ 标准</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21%E5%AD%90%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.13.</span> <span class="toc-text"> 2.1 子项目</span></a></li></ol></li></ol>
      </div>
      <div class="related panel pjax" data-title="系列文章">
        <ul>
          <li><a href="/2023/01/07/CSAPP%E3%81%AE%E5%AD%A6%E7%BF%92%E8%A8%98%E9%8C%B2/" rel="bookmark" title="CSAPPの学習記録">CSAPPの学習記録</a></li><li><a href="/2023/02/04/N1CTF%20Junior%20%20WP%20%20by%203cly/" rel="bookmark" title="N1CTF Junior  WP">N1CTF Junior  WP</a></li><li><a href="/2023/02/04/hgame2023%20%E9%83%A8%E5%88%86%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/" rel="bookmark" title="hgame2023 部分做题记录">hgame2023 部分做题记录</a></li><li><a href="/2023/02/26/shellcode&&vm/" rel="bookmark" title="shellcode&&vm">shellcode&&vm</a></li><li><a href="/2023/02/26/VNCTF/" rel="bookmark" title="VNCTF">VNCTF</a></li><li><a href="/2023/03/19/JAVA%E5%AD%A6%E4%B9%A0/" rel="bookmark" title="JAVA学习">JAVA学习</a></li><li><a href="/2023/03/19/Write-Virtual-Machine/" rel="bookmark" title="Write Virtual Machine">Write Virtual Machine</a></li><li class="active"><a href="/2023/03/26/CMake/" rel="bookmark" title="=CMake=">=CMake=</a></li><li><a href="/2023/04/02/%E5%87%A0%E9%81%93RE%E9%A2%98/" rel="bookmark" title="几道RE题">几道RE题</a></li><li><a href="/2023/04/16/Angr%E7%AC%A6%E5%8F%B7%E6%89%A7%E8%A1%8C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="bookmark" title="Angr符号执行学习笔记">Angr符号执行学习笔记</a></li><li><a href="/2023/04/25/pixel-4a-root/" rel="bookmark" title="pixel 4a root">pixel 4a root</a></li><li><a href="/2023/05/28/%E5%88%9D%E8%AF%86Frida/" rel="bookmark" title="初识Frida">初识Frida</a></li><li><a href="/2023/05/28/%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8A%80%E6%9C%AF%E4%B8%8E%E7%A0%94%E7%A9%B6%E8%BF%9B%E5%B1%95/" rel="bookmark" title="区块链技术与研究进展">区块链技术与研究进展</a></li>
        </ul>
      </div>
      <div class="overview panel" data-title="站点概览">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="sky"
      data-src="/images/avatar.png">
  <p class="name" itemprop="name">sky</p>
  <div class="description" itemprop="description">一只菜狗的博客</div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">18</span>
        <span class="name">文章</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">4</span>
        <span class="name">分类</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">2</span>
        <span class="name">标签</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tLzNjbHk=" title="https:&#x2F;&#x2F;github.com&#x2F;3cly"><i class="ic i-github"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>首页</a>
  </li>

    
  <li class="item">
    <a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a>
  </li>

    
  <li class="item">
    <a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a>
  </li>

    
  <li class="item">
    <a href="/link/" rel="section"><i class="ic i-magic"></i>links</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2023/03/19/JAVA%E5%AD%A6%E4%B9%A0/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2023/04/02/%E5%87%A0%E9%81%93RE%E9%A2%98/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          
<div class="rpost pjax">
  <h2>随机文章</h2>
  <ul>
      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E5%AD%A6%E4%B9%A0/" title="分类于 学习">学习</a>
</div>

    <span><a href="/2023/04/16/Angr%E7%AC%A6%E5%8F%B7%E6%89%A7%E8%A1%8C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Angr符号执行学习笔记">Angr符号执行学习笔记</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E5%AD%A6%E4%B9%A0/" title="分类于 学习">学习</a>
</div>

    <span><a href="/2023/05/28/%E5%88%9D%E8%AF%86Frida/" title="初识Frida">初识Frida</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E5%AD%A6%E4%B9%A0/" title="分类于 学习">学习</a>
</div>

    <span><a href="/2023/02/04/N1CTF%20Junior%20%20WP%20%20by%203cly/" title="N1CTF Junior  WP">N1CTF Junior  WP</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E5%9F%BA%E6%9C%ACROP%E5%AD%A6%E4%B9%A0/" title="分类于 基本ROP学习">基本ROP学习</a>
</div>

    <span><a href="/2022/12/15/%E5%9F%BA%E6%9C%ACROP%E5%AD%A6%E4%B9%A0/" title="基本ROP学习">基本ROP学习</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E5%AD%A6%E4%B9%A0/" title="分类于 学习">学习</a>
</div>

    <span><a href="/2023/03/19/JAVA%E5%AD%A6%E4%B9%A0/" title="JAVA学习">JAVA学习</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E5%AD%A6%E4%B9%A0/" title="分类于 学习">学习</a>
</div>

    <span><a href="/2023/02/04/hgame2023%20%E9%83%A8%E5%88%86%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/" title="hgame2023 部分做题记录">hgame2023 部分做题记录</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/Hexo/" title="分类于 Hexo">Hexo</a>
</div>

    <span><a href="/2022/12/15/%E5%8D%9A%E5%AE%A2%E7%AE%80%E4%BB%8B/" title="博客简介">博客简介</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E5%AD%A6%E4%B9%A0/" title="分类于 学习">学习</a>
</div>

    <span><a href="/2023/05/28/%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8A%80%E6%9C%AF%E4%B8%8E%E7%A0%94%E7%A9%B6%E8%BF%9B%E5%B1%95/" title="区块链技术与研究进展">区块链技术与研究进展</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E5%AD%A6%E4%B9%A0/" title="分类于 学习">学习</a>
</div>

    <span><a href="/2023/04/02/%E5%87%A0%E9%81%93RE%E9%A2%98/" title="几道RE题">几道RE题</a></span>
  </li>

      
  <li class="item">
    
<div class="breadcrumb">
<a href="/categories/%E5%AD%A6%E4%B9%A0/" title="分类于 学习">学习</a>
</div>

    <span><a href="/2023/04/25/pixel-4a-root/" title="pixel 4a root">pixel 4a root</a></span>
  </li>

  </ul>
</div>
<div>
  <h2>最新评论</h2>
  <ul class="leancloud-recent-comment"></ul>
</div>

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2022 – 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">sky @ 静かな港</span>
  </div>
  <div class="count">
    <span class="post-meta-item-icon">
      <i class="ic i-chart-area"></i>
    </span>
    <span title="站点总字数">81k 字</span>

    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="ic i-coffee"></i>
    </span>
    <span title="站点阅读时长">1:13</span>
  </div>
  <div class="powered-by">
    基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2023/03/26/CMake/',
    favicon: {
      show: "（●´3｀●）やれやれだぜ",
      hide: "(´Д｀)大変だ！"
    },
    search : {
      placeholder: "文章搜索",
      empty: "关于 「 ${query} 」，什么也没搜到",
      stats: "${time} ms 内找到 ${hits} 条结果"
    },
    valine: true,fancybox: true,
    copyright: '复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
